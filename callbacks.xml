<?xml version="1.0" encoding="UTF-8" standalone="no" ?>
<?xml-stylesheet type="text/xsl" href="callbacks.xsl"?>

<plugin name="Subprocess" author="federico.ferri.it@gmail.com">
    <description>API functions for subprocess</description>
    <command name="exec">
        <description>Execute a subprocess.</description>
        <params>
            <param name="programPath" type="string" />
            <param name="args" type="table" item-type="string" />
            <param name="input" type="string" default='""' />
            <param name="useSearchPath" type="bool" default="true" />
        </params>
        <return>
            <param name="exitCode" type="int" />
            <param name="output" type="string" />
        </return>
    </command>
    <command name="execAsync">
        <description>Execute a subprocess without waiting for termination.</description>
        <params>
            <param name="programPath" type="string" />
            <param name="args" type="table" item-type="string" />
            <param name="useSearchPath" type="bool" default="true" />
        </params>
        <return>
            <param name="handle" type="string" />
        </return>
    </command>
    <command name="isRunning">
        <description>Check wether a subprocess previously launched with <command-ref name="execAsync" /> is running.</description>
        <params>
            <param name="handle" type="string" />
        </params>
        <return>
            <param name="running" type="bool" />
        </return>
    </command>
    <command name="wait">
        <description>Wait for termination of a subprocess previously launched with <command-ref name="execAsync" />. If subprocess terminates, the exit code is returned.</description>
        <params>
            <param name="handle" type="string" />
            <param name="timeout" type="float" default="5" />
        </params>
        <return>
            <param name="exitCode" type="int" nullable="true" />
        </return>
    </command>
    <command name="terminate">
        <description>Forcefully terminate a subprocess previously launched with <command-ref name="execAsync" />.</description>
        <params>
            <param name="handle" type="string" />
        </params>
        <return>
            <param name="exitCode" type="int" nullable="true" />
        </return>
    </command>
</plugin>
